<p-dialog
  *ngIf="alert"
  [(visible)]="alert"
  [maximizable]="true"
  [dismissableMask]="true"
  [closable]="true"
  [responsive]="true"
  styleClass="alert-details-container"
  position="top-left"
  (onHide)="onClose($event)"
>
  <ng-template pTemplate="header">
    <div>
      <i
        class="font-size-1-rem fa-fw {{ alert.alertType | alertIconByType }} {{
          alert.alertSeverity | colorByAlertSeverity
        }} p-mr-2"
      ></i>
      <h2
        class="display-inline-block p-m-0 {{
          alert.alertSeverity | colorByAlertSeverity
        }}"
        [ngClass]="{
          'color-heading': alert.alertSeverity === AlertSeverityEnum.Low
        }"
      >
        {{ alert.alertType }}
      </h2>
    </div>
  </ng-template>
  <div class="alert-details">
    <h4 class="font-weight-medium p-mt-0">
      <strong>Time:</strong> {{ alert.createdAt | date: "MMM dd h:mm a" }}<br />
      <strong>Region:</strong> {{ alert.region?.name }}
    </h4>
    <p-messages
      [(value)]="messages"
      [enableService]="false"
      [closable]="false"
      styleClass="p-mb-4"
    ></p-messages>
    <button
      pButton
      pRipple
      type="button"
      label="View Alert Playback"
      icon="fas fa-play-circle"
      class="p-button-rounded p-button-sm p-d-block p-mb-4"
    ></button>
    <p-panel styleClass="standard" header="Placeholder Title">
      <p class="p-mt-0 p-mb-4">Placeholder description of graph below.</p>
      <p-chart
        *ngIf="alert"
        type="bar"
        height="200"
        [data]="stackedData"
        [options]="stackedOptions"
      ></p-chart>
    </p-panel>
  </div>
  <p-footer>
    <button
      *ngIf="!alert.acknowledgedBy && canAcknowledgeAlert()"
      pButton
      pRipple
      type="button"
      label="Acknowledge Alert"
      icon="fas fa-check-circle"
      (click)="onAcknowledge()"
      [icon]="loading === true ? 'fas fa-spinner fa-spin' : ''"
      [disabled]="loading === true || alert.acknowledgedAt"
      class="p-button-rounded width-100 p-d-block p-mt-2 p-mb-2"
    ></button>
    <div class="p-text-center" *ngIf="alert.acknowledgedBy">
      <i class="far fa-check-circle icon color-green p-mr-2"></i>
      <small
        >Acknowledged by
        <strong>
          {{ alert.acknowledgedBy.firstName }}
          {{ alert.acknowledgedBy.lastName }}
        </strong>
        at
        {{ acknowledgedAt | date: "MMM dd h:mm a" }}
      </small>
    </div>
  </p-footer>
</p-dialog>
